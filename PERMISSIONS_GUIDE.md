# ุฏููู ุงุณุชุฎุฏุงู ูุธุงู ุงูุตูุงุญูุงุช - Vita HR

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทุจูู ูุธุงู ุตูุงุญูุงุช ูุชูุงูู ูู ุงูุชุทุจูู ูุณูุญ ุจุงูุชุญูู ุงูุฏููู ูู ูู ููููู ุงููุตูู ููู ููุฒุฉ.

---

## ๐ ูุงุฆูุฉ ุงูุตูุงุญูุงุช ุงููุทููุจุฉ

### ุตูุงุญูุงุช ุงูุฅุฏุงุฑุฉ (Management)
- `VIEW_MANAGEMENT` - ุนุฑุถ ูุณู ุงูุฅุฏุงุฑุฉ
- `VIEW_USERS` - ุนุฑุถ ุงููุณุชุฎุฏููู
- `CREATE_USER` - ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
- `EDIT_USER` - ุชุนุฏูู ูุณุชุฎุฏู
- `DELETE_USER` - ุญุฐู ูุณุชุฎุฏู
- `VIEW_ROLES` - ุนุฑุถ ุงูุฃุฏูุงุฑ
- `CREATE_ROLE` - ุฅุถุงูุฉ ุฏูุฑ ุฌุฏูุฏ
- `EDIT_ROLE` - ุชุนุฏูู ุฏูุฑ
- `DELETE_ROLE` - ุญุฐู ุฏูุฑ
- `VIEW_DEPARTMENTS` - ุนุฑุถ ุงูุฃูุณุงู
- `CREATE_DEPARTMENT` - ุฅุถุงูุฉ ูุณู
- `EDIT_DEPARTMENT` - ุชุนุฏูู ูุณู
- `DELETE_DEPARTMENT` - ุญุฐู ูุณู
- `VIEW_EMPLOYEES` - ุนุฑุถ ุงูููุธููู
- `CREATE_EMPLOYEE` - ุฅุถุงูุฉ ููุธู
- `EDIT_EMPLOYEE` - ุชุนุฏูู ููุธู
- `DELETE_EMPLOYEE` - ุญุฐู ููุธู
- `VIEW_SUBORDINATES` - ุนุฑุถ ุงููุฑุคูุณูู

### ุตูุงุญูุงุช ุงูุญุถูุฑ (Attendance)
- `VIEW_MY_ATTENDANCE` - ุนุฑุถ ุญุถูุฑู ุงูุดุฎุตู
- `CHECK_IN_OUT` - ุชุณุฌูู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู
- `VIEW_ALL_ATTENDANCE` - ุนุฑุถ ุญุถูุฑ ุฌููุน ุงูููุธููู
- `EDIT_ATTENDANCE` - ุชุนุฏูู ุณุฌูุงุช ุงูุญุถูุฑ
- `DELETE_ATTENDANCE` - ุญุฐู ุณุฌูุงุช ุงูุญุถูุฑ
- `VIEW_MY_ALERTS` - ุนุฑุถ ุชูุจููุงุชู ุงูุดุฎุตูุฉ
- `VIEW_ALL_ALERTS` - ุนุฑุถ ุฌููุน ุงูุชูุจููุงุช
- `VIEW_WORK_SCHEDULES` - ุนุฑุถ ุฌุฏุงูู ุงูุนูู
- `CREATE_WORK_SCHEDULE` - ุฅุถุงูุฉ ุฌุฏูู ุนูู
- `EDIT_WORK_SCHEDULE` - ุชุนุฏูู ุฌุฏูู ุนูู
- `DELETE_WORK_SCHEDULE` - ุญุฐู ุฌุฏูู ุนูู

### ุตูุงุญูุงุช ุงูุฅุฌุงุฒุงุช (Leaves)
- `VIEW_MY_LEAVES` - ุนุฑุถ ุฅุฌุงุฒุงุชู
- `REQUEST_LEAVE` - ุทูุจ ุฅุฌุงุฒุฉ
- `CANCEL_LEAVE` - ุฅูุบุงุก ุทูุจ ุฅุฌุงุฒุฉ
- `VIEW_ALL_LEAVES` - ุนุฑุถ ุฌููุน ุงูุฅุฌุงุฒุงุช
- `APPROVE_LEAVE` - ุงูููุงููุฉ ุนูู ุงูุฅุฌุงุฒุงุช
- `REJECT_LEAVE` - ุฑูุถ ุงูุฅุฌุงุฒุงุช
- `VIEW_LEAVE_TYPES` - ุนุฑุถ ุฃููุงุน ุงูุฅุฌุงุฒุงุช
- `CREATE_LEAVE_TYPE` - ุฅุถุงูุฉ ููุน ุฅุฌุงุฒุฉ
- `EDIT_LEAVE_TYPE` - ุชุนุฏูู ููุน ุฅุฌุงุฒุฉ
- `DELETE_LEAVE_TYPE` - ุญุฐู ููุน ุฅุฌุงุฒุฉ
- `VIEW_HOLIDAYS` - ุนุฑุถ ุงูุฃูุงู ุงูุฑุณููุฉ
- `CREATE_HOLIDAY` - ุฅุถุงูุฉ ููู ุฑุณูู
- `EDIT_HOLIDAY` - ุชุนุฏูู ููู ุฑุณูู
- `DELETE_HOLIDAY` - ุญุฐู ููู ุฑุณูู
- `VIEW_LEAVE_BALANCES` - ุนุฑุถ ุฃุฑุตุฏุฉ ุงูุฅุฌุงุฒุงุช
- `ADJUST_LEAVE_BALANCE` - ุชุนุฏูู ุฑุตูุฏ ุงูุฅุฌุงุฒุฉ

### ุตูุงุญูุงุช ุงูุชูููู (Evaluations)
- `VIEW_EVALUATIONS` - ุนุฑุถ ูุณู ุงูุชููููุงุช
- `VIEW_MY_EVALUATIONS` - ุนุฑุถ ุชููููุงุชู
- `SUBMIT_SELF_EVALUATION` - ุชูุฏูู ุงูุชูููู ุงูุฐุงุชู
- `VIEW_ALL_EVALUATIONS` - ุนุฑุถ ุฌููุน ุงูุชููููุงุช
- `REVIEW_EVALUATIONS` - ูุฑุงุฌุนุฉ ุงูุชููููุงุช
- `APPROVE_EVALUATION` - ุงูููุงููุฉ ุนูู ุงูุชูููู
- `REJECT_EVALUATION` - ุฑูุถ ุงูุชูููู
- `VIEW_EVALUATION_PERIODS` - ุนุฑุถ ูุชุฑุงุช ุงูุชูููู
- `CREATE_EVALUATION_PERIOD` - ุฅุถุงูุฉ ูุชุฑุฉ ุชูููู
- `EDIT_EVALUATION_PERIOD` - ุชุนุฏูู ูุชุฑุฉ ุชูููู
- `DELETE_EVALUATION_PERIOD` - ุญุฐู ูุชุฑุฉ ุชูููู
- `VIEW_EVALUATION_CRITERIA` - ุนุฑุถ ูุนุงููุฑ ุงูุชูููู
- `CREATE_EVALUATION_CRITERIA` - ุฅุถุงูุฉ ูุนูุงุฑ ุชูููู
- `EDIT_EVALUATION_CRITERIA` - ุชุนุฏูู ูุนูุงุฑ ุชูููู
- `DELETE_EVALUATION_CRITERIA` - ุญุฐู ูุนูุงุฑ ุชูููู

### ุตูุงุญูุงุช ุฎุงุตุฉ
- `*` ุฃู `ADMIN` - ุตูุงุญูุงุช ูุงููุฉ (Admin)

---

## ๐ผ ุชูุฒูุน ุงูุตูุงุญูุงุช ุนูู ุงูุฃุฏูุงุฑ

### Admin
```json
["*"]
```
ุฃู
```json
["ADMIN"]
```

### HR Manager
```json
[
  "VIEW_MANAGEMENT",
  "VIEW_EMPLOYEES", "CREATE_EMPLOYEE", "EDIT_EMPLOYEE", "DELETE_EMPLOYEE",
  "VIEW_DEPARTMENTS", "CREATE_DEPARTMENT", "EDIT_DEPARTMENT", "DELETE_DEPARTMENT",
  "VIEW_ALL_ATTENDANCE", "EDIT_ATTENDANCE", "DELETE_ATTENDANCE",
  "VIEW_ALL_ALERTS",
  "VIEW_WORK_SCHEDULES", "CREATE_WORK_SCHEDULE", "EDIT_WORK_SCHEDULE", "DELETE_WORK_SCHEDULE",
  "VIEW_ALL_LEAVES", "APPROVE_LEAVE", "REJECT_LEAVE",
  "VIEW_LEAVE_TYPES", "CREATE_LEAVE_TYPE", "EDIT_LEAVE_TYPE", "DELETE_LEAVE_TYPE",
  "VIEW_HOLIDAYS", "CREATE_HOLIDAY", "EDIT_HOLIDAY", "DELETE_HOLIDAY",
  "VIEW_LEAVE_BALANCES", "ADJUST_LEAVE_BALANCE",
  "VIEW_EVALUATIONS", "VIEW_ALL_EVALUATIONS", "REVIEW_EVALUATIONS"
]
```

### Manager
```json
[
  "VIEW_SUBORDINATES",
  "VIEW_MY_ATTENDANCE", "CHECK_IN_OUT",
  "VIEW_MY_ALERTS",
  "VIEW_MY_LEAVES", "REQUEST_LEAVE", "CANCEL_LEAVE",
  "APPROVE_LEAVE", "REJECT_LEAVE",
  "VIEW_MY_EVALUATIONS", "REVIEW_EVALUATIONS"
]
```

### Employee
```json
[
  "VIEW_MY_ATTENDANCE", "CHECK_IN_OUT",
  "VIEW_MY_ALERTS",
  "VIEW_MY_LEAVES", "REQUEST_LEAVE", "CANCEL_LEAVE",
  "VIEW_MY_EVALUATIONS", "SUBMIT_SELF_EVALUATION"
]
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุญูุงูุฉ ุตูุญุฉ ูุงููุฉ (Page Protection)

ุงุณุชุฎุฏู `withPermission` HOC ูุญูุงูุฉ ุตูุญุฉ ูุงููุฉ:

```tsx
// app/[locale]/(dashboard)/employees/page.tsx
"use client";

import { withPermission } from "@/components/shared/with-permission";

function EmployeesPage() {
  return (
    <div>
      <h1>ูุงุฆูุฉ ุงูููุธููู</h1>
      {/* ูุญุชูู ุงูุตูุญุฉ */}
    </div>
  );
}

// ุชุตุฏูุฑ ุงูุตูุญุฉ ูุน ุงูุญูุงูุฉ
export default withPermission(EmployeesPage, "VIEW_EMPLOYEES");
```

**ุญูุงูุฉ ุจุนุฏุฉ ุตูุงุญูุงุช (ูุญุชุงุฌ ุฃู ูุงุญุฏุฉ):**
```tsx
export default withPermission(
  AttendancePage,
  ["VIEW_MY_ATTENDANCE", "VIEW_ALL_ATTENDANCE"]
);
```

**ุญูุงูุฉ ุจุนุฏุฉ ุตูุงุญูุงุช (ูุญุชุงุฌ ุงููู):**
```tsx
export default withPermission(
  ExportPage,
  ["VIEW_EMPLOYEES", "EXPORT_DATA"],
  { requireAll: true }
);
```

**ุฑุณุงูุฉ ูุฎุตุตุฉ:**
```tsx
export default withPermission(
  SalaryPage,
  "VIEW_SALARY",
  { message: "ููุณ ูุฏูู ุตูุงุญูุฉ ูุนุฑุถ ุงูุฑูุงุชุจ" }
);
```

---

### 2. ุญูุงูุฉ ุงูุนูุงุตุฑ ุฏุงุฎู ุงููููู (Component Elements)

ุงุณุชุฎุฏู `PermissionGuard` ูุฅุฎูุงุก ุฃู ุนุฑุถ ุนูุงุตุฑ ูุนููุฉ:

```tsx
import { PermissionGuard } from "@/components/shared/permission-guard";

export function EmployeesList() {
  return (
    <div>
      <PageHeader title="ุงูููุธููู">
        {/* ุฒุฑ "ุฅุถุงูุฉ ููุธู" ูุธูุฑ ููุท ููู ูุฏูู ุตูุงุญูุฉ */}
        <PermissionGuard permission="CREATE_EMPLOYEE">
          <Button onClick={() => setDialogOpen(true)}>
            <Plus className="h-4 w-4" />
            ุฅุถุงูุฉ ููุธู
          </Button>
        </PermissionGuard>
      </PageHeader>

      <Table>
        <TableBody>
          {employees.map((employee) => (
            <TableRow key={employee.id}>
              <TableCell>{employee.name}</TableCell>
              <TableCell>
                {/* ุฃุฒุฑุงุฑ ุงูุชุนุฏูู ูุงูุญุฐู */}
                <PermissionGuard permission="EDIT_EMPLOYEE">
                  <Button onClick={() => handleEdit(employee)}>
                    ุชุนุฏูู
                  </Button>
                </PermissionGuard>

                <PermissionGuard permission="DELETE_EMPLOYEE">
                  <Button
                    variant="destructive"
                    onClick={() => handleDelete(employee)}
                  >
                    ุญุฐู
                  </Button>
                </PermissionGuard>
              </TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>
    </div>
  );
}
```

**ูุน ุนูุตุฑ ุจุฏูู:**
```tsx
<PermissionGuard
  permission="VIEW_SALARY"
  fallback={<span className="text-muted">ูุฎูู</span>}
>
  <span>{employee.salary} ุฑูุงู</span>
</PermissionGuard>
```

**ุนุฏุฉ ุตูุงุญูุงุช:**
```tsx
<PermissionGuard permissions={["EDIT_EMPLOYEE", "DELETE_EMPLOYEE"]}>
  <div className="flex gap-2">
    <Button>ุชุนุฏูู</Button>
    <Button>ุญุฐู</Button>
  </div>
</PermissionGuard>
```

---

### 3. ุงุณุชุฎุฏุงู Hook ูุจุงุดุฑุฉ

ููุญุงูุงุช ุงููุนูุฏุฉุ ุงุณุชุฎุฏู `usePermissions` hook:

```tsx
import { usePermissions } from "@/lib/hooks/use-permissions";

export function EmployeesPage() {
  const { hasPermission, hasAnyPermission, isAdmin } = usePermissions();

  const canEdit = hasPermission("EDIT_EMPLOYEE");
  const canDelete = hasPermission("DELETE_EMPLOYEE");
  const canViewOrEdit = hasAnyPermission(["VIEW_EMPLOYEES", "EDIT_EMPLOYEE"]);

  return (
    <div>
      {isAdmin() && (
        <div className="bg-yellow-100 p-4">
          ุฃูุช ูุฏูุฑ ุงููุธุงู - ูุฏูู ูู ุงูุตูุงุญูุงุช
        </div>
      )}

      {canEdit && <Button>ุชุนุฏูู</Button>}
      {canDelete && <Button>ุญุฐู</Button>}

      {canViewOrEdit && (
        <div>ููููู ุนุฑุถ ุฃู ุชุนุฏูู ุงูููุธููู</div>
      )}
    </div>
  );
}
```

---

## ๐ง ุชุฎุฒูู ุงูุตูุงุญูุงุช

ุงูุตูุงุญูุงุช ูุชู ุชุฎุฒูููุง ูู:
- **Auth Store** (`lib/stores/auth-store.ts`)
- **localStorage/Cookie** (ุชููุงุฆูุงู ุนุจุฑ Zustand persist)

ุนูุฏ ุชุณุฌูู ุงูุฏุฎููุ ูุชู ุฌูุจ ุงูุตูุงุญูุงุช ูู Backend ูุชุฎุฒูููุง ุชููุงุฆูุงู.

---

## ๐ ุชุญุฏูุซ ุงูุตูุงุญูุงุช

### ุนูุฏ ุชุบููุฑ ุตูุงุญูุงุช ุงููุณุชุฎุฏู:

**ุงูุทุฑููุฉ ุงูุฃููู - ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู:**
```tsx
// ุงููุณุชุฎุฏู ูุญุชุงุฌ ุชุณุฌูู ุฎุฑูุฌ ูุฏุฎูู ูู ุฌุฏูุฏ
await logout();
```

**ุงูุทุฑููุฉ ุงูุซุงููุฉ - ุชุญุฏูุซ ุชููุงุฆู (ูุณุชูุจูุงู):**
```tsx
import { useAuthStore } from "@/lib/stores/auth-store";

// ูู ูููู ูุนูู
const refreshPermissions = async () => {
  const response = await fetch("/api/auth/me");
  const data = await response.json();

  useAuthStore.getState().setPermissions(data.permissions);
};
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงูุญูุงูุฉ ูู Frontend ููุท ููุนุฑุถ**
   - ุงูุญูุงูุฉ ุงูุญููููุฉ ูุฌุจ ุฃู ุชููู ูู Backend
   - Frontend ูุฎูู ุงูุนูุงุตุฑ ููุทุ ููู Backend ูููุน ุงููุตูู

2. **Admin ูู ูู ุงูุตูุงุญูุงุช**
   - ุฅุฐุง ูุงู ูุฏูู ุตูุงุญูุฉ `*` ุฃู `ADMIN`
   - ุฃู ุฏูุฑู `ADMIN`

3. **ุงูุตูุงุญูุงุช ุญุณุงุณุฉ ูุญุงูุฉ ุงูุฃุญุฑู**
   - `VIEW_EMPLOYEES` โ `view_employees`
   - ุงุณุชุฎุฏู ุงูุตูุงุญูุงุช ุจููุณ ุงูุตูุบุฉ ุงููุญุฏุฏุฉ

4. **ุงูุตูุญุงุช ุจุฏูู ุญูุงูุฉ**
   - ุฅุฐุง ูู ุชุถู `withPermission` ููุตูุญุฉ
   - ุงููู ููููู ุงููุตูู ุฅูููุง

---

## ๐จ ุฃูุซูุฉ ูุชูุฏูุฉ

### ูุซุงู 1: ุตูุญุฉ ูุน ุญูุงูุฉ ูุชุนุฏุฏุฉ ุงููุณุชููุงุช

```tsx
// ุงูุตูุญุฉ ูุญููุฉ ุจุตูุงุญูุฉ VIEW_EMPLOYEES
function EmployeesPage() {
  const { hasPermission } = usePermissions();

  return (
    <div>
      {/* ุฒุฑ ุฅุถุงูุฉ ูุญูู ุจุตูุงุญูุฉ CREATE_EMPLOYEE */}
      <PermissionGuard permission="CREATE_EMPLOYEE">
        <Button>ุฅุถุงูุฉ ููุธู</Button>
      </PermissionGuard>

      <Table>
        <TableBody>
          {employees.map((employee) => (
            <TableRow>
              <TableCell>{employee.name}</TableCell>
              <TableCell>
                {/* ุฅุฎูุงุก ุงูุฑุงุชุจ ุฅุฐุง ูุง ุนูุฏู ุตูุงุญูุฉ */}
                <PermissionGuard
                  permission="VIEW_SALARY"
                  fallback="ูุฎูู"
                >
                  {employee.salary}
                </PermissionGuard>
              </TableCell>
              <TableCell>
                {/* ุฃุฒุฑุงุฑ ุญุณุจ ุงูุตูุงุญูุงุช */}
                {hasPermission("EDIT_EMPLOYEE") && <Button>ุชุนุฏูู</Button>}
                {hasPermission("DELETE_EMPLOYEE") && <Button>ุญุฐู</Button>}
              </TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>
    </div>
  );
}

export default withPermission(EmployeesPage, "VIEW_EMPLOYEES");
```

### ูุซุงู 2: ุดุฑุท ูุนูุฏ

```tsx
function Dashboard() {
  const { hasPermission, hasAnyPermission, isAdmin } = usePermissions();

  // ุดุฑุท ูุนูุฏ: Admin ุฃู ูุฏูู ุตูุงุญูุงุช ูุนููุฉ
  const canAccessReports =
    isAdmin() ||
    (hasPermission("VIEW_REPORTS") && hasPermission("EXPORT_DATA"));

  // ุนุฑุถ ูุฎุชูู ุญุณุจ ุงูุตูุงุญูุงุช
  const userRole = isAdmin()
    ? "ูุฏูุฑ ุงููุธุงู"
    : hasAnyPermission(["VIEW_EMPLOYEES", "EDIT_EMPLOYEES"])
    ? "ููุงุฑุฏ ุจุดุฑูุฉ"
    : "ููุธู ุนุงุฏู";

  return (
    <div>
      <h1>ูุฑุญุจุงู {userRole}</h1>

      {canAccessReports && (
        <div>
          <h2>ุงูุชูุงุฑูุฑ</h2>
          {/* ูุญุชูู ุงูุชูุงุฑูุฑ */}
        </div>
      )}
    </div>
  );
}
```

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงู ูุฏูู ุฃุณุฆูุฉ ุฃู ูุดุงูู ูุน ูุธุงู ุงูุตูุงุญูุงุชุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

---

**ุขุฎุฑ ุชุญุฏูุซ:** ูุจุฑุงูุฑ 2026
